{"Id":141,"Title":"Learn lua by example - 2 类型与值","Slug":"2014-12-3-2","Text":"# 第2章 类型与值\n\n### 2.1 八种基本类型\n\n|空|布尔|数字|字符串|自定义类型|函数|线程|表|\n|-|-|-|-|-|-|-|-|\n|nil|boolean|number|string|userdata|function|thread|table|\n\n### 2.2 type函数\n\n```sh\n-\u003e /d/lua $ lua\nLua 5.2.0  Copyright (C) 1994-2011 Lua.org, PUC-Rio\n\u003e = type(\"hello\")\nstring\n\u003e type(12*23/2+2.4)\n\u003e =type(12*23/2+2.4)\nnumber\n\u003e =type(print)\nfunction\n\u003e =type(type)\nfunction\n\u003e =type(true)\nboolean\n\u003e =type(nil)\nnil\n\u003e =type(type(2))\nstring\n\u003e =type(type(X))\nstring\n\u003e type(abc)\n\u003e =type(abc)\nnil\n\u003e abc = print\n\u003e =type(abc)\nfunction\n\u003e abc(\"world\")\nworld\n\u003e\n```\n### 2.3 nil\n  + 一种类型\n  + 唯一的值`nil`\n  + 未赋值的变量为`nil`\n \n\n### 2.4 boolean\n  + 两个值 `true` and `false`\n  + `false` and `nil`为假 其余全部为真 `0` 和`\"\"`也为真\n\n\n### 2.5 number\n\n  + lua不区分浮点和整形\n  + 详见`luaconf.h`\n  + number表示法 `4`,`0.42`,`4.75e-3`,`0.3e12`, `5e+20`\n\nexample:\n\n```sh\n-\u003e /d/lua $ lua\nLua 5.2.0  Copyright (C) 1994-2011 Lua.org, PUC-Rio\n\u003e =4\n4\n\u003e =0.42\n0.42\n\u003e =4.57e-3\n0.00457\n\u003e =0.3e12\n300000000000\n\u003e =5e+20\n5e+020\n\u003e\n```\n\n### 2.6 string\n\n  + lua string完全采用8位编码\n  + lua字符串不可变\n  + lua字符串处理高效\n  + 单双引号皆可\n  + 自动垃圾回收\n \nexample：\n\n```sh\n-\u003e /d/lua $ lua\nLua 5.2.0  Copyright (C) 1994-2011 Lua.org, PUC-Rio\n\u003e print(\"hello 世界!\")\nhello 世界!\n\u003e a = \"one string\"\n\u003e b = string.gsub(a, \"one\", \"two\")\n\u003e =b\ntwo string\n\u003e =a\none string\n\u003e c = 'string'\n\u003e =c\nstring\n```\n\n转义字符列表\n\n|字符|意义|\n|-|-|\n|`\\a`|响铃|\n|`\\b`|退格(back space)|\n|`\\f`|提供表格(form feed)|\n|`\\n`|换行|\n|`\\r`|回车|\n|`\\t`|水平tab|\n|`\\v`|垂直tab|\n|`\\\\`|反斜杠|\n|`\\\"`|双引号|\n|`\\'`|单引号|\n\nexample:\n\n``` sh\n-\u003e /d/lua $ lua\nLua 5.2.0  Copyright (C) 1994-2011 Lua.org, PUC-Rio\n\u003e =\"hello\"\nhello\n\u003e =\"this is a test.\\n test1 \\n \\\"string\\\", 'yes'\"\nthis is a test.\n test1\n \"string\", 'yes'\n\u003e =\"this is a test.\\ntest1 \\n\\\"string\\\", 'yes'\"\nthis is a test.\ntest1\n\"string\", 'yes'\n\u003e\n```\n\n数值转义(ASCII)\n\n```sh\n-\u003e /d/lua $ lua\nLua 5.2.0  Copyright (C) 1994-2011 Lua.org, PUC-Rio\n\u003e =\"alo\"\nalo\n\u003e =\"\\97lo\"\nalo\n\u003e\n```\n\n多行块字符串\n  + 忽略首回车\n  + 忽略其中转义字符\n\nexample：\n\n```sh\n-\u003e /d/lua $ lua\nLua 5.2.0  Copyright (C) 1994-2011 Lua.org, PUC-Rio\n\u003e page = [[\n\u003e\u003e hello \\n\\n\\n\\n\\n\n\u003e\u003e lll\n\u003e\u003e fffff\n\u003e\u003e \u003cffff\u003e\n\u003e\u003e \u003ca\u003ekkk\u003c\u003ea\n\u003e\u003e\n\u003e\u003e\n\u003e\u003e\n\u003e\u003e ]]\n\u003e =page\nhello \\n\\n\\n\\n\\n\nlll\nfffff\n\u003cffff\u003e\n\u003ca\u003ekkk\u003c\u003ea\n\n\n\n\n\u003e\n\u003e\n```\n\n`=`多行字符串与注释，为了屏蔽互相干扰\n\nexample：\n\n``` sh\n-\u003e /d/lua $ lua\nLua 5.2.0  Copyright (C) 1994-2011 Lua.org, PUC-Rio\n\u003e page=[===[\n\u003e\u003e hello \\r\\t\\y\n\u003e\u003e ]\n\u003e\u003e ]]\n\u003e\u003e ]]]\n\u003e\u003e ]==]\n\u003e\u003e ]====]\n\u003e\u003e ]===]\n\u003e =page\nhello \\r\\t\\y\n]\n]]\n]]]\n]==]\n]====]\n\n\u003e --[====[\n\u003e\u003e print(10)\n\u003e\u003e ]]\n\u003e\u003e print(1)\n\u003e\u003e ]]--\n\u003e\u003e print(1)\n\u003e\u003e ]===]--\n\u003e\u003e print(1)\n\u003e\u003e ]====]--\n\u003e print(1)\n1\n\u003e\n```\n\n字符与数字转换\n\n```sh\n-\u003e /d/lua $ lua\nLua 5.2.0  Copyright (C) 1994-2011 Lua.org, PUC-Rio\n\u003e =\"10\" + 1\n11\n\u003e =\"10 + 1\"\n10 + 1\n\u003e =\"-5.3e-10\" * 10\n-5.3e-009\n\u003e \"hello\" + 1\nstdin:1: unexpected symbol near '\"hello\"'\n\u003e \"hello\" + \"1\"\nstdin:1: unexpected symbol near '\"hello\"'\n\u003e =\"hello\" + 1\nstdin:1: attempt to perform arithmetic on a string value\nstack traceback:\n        stdin:1: in main chunk\n        [C]: in ?\n\u003e =\"hello\" + \"1\"\nstdin:1: attempt to perform arithmetic on a string value\nstack traceback:\n        stdin:1: in main chunk\n        [C]: in ?\n\u003e a=\"hello\" + \"1\"\nstdin:1: attempt to perform arithmetic on a string value\nstack traceback:\n        stdin:1: in main chunk\n        [C]: in ?\n\u003e a=\"hello\" .. \"1\"\n\u003e =a\nhello1\n\u003e a=\"11\" .. \"1\"\n\u003e =a\n111\n\u003e =tonumber(\"123\")\n123\n\u003e =tonumber(\"123a\")\nnil\n\u003e =tonumber(\"a12\")\nnil\n\u003e =tonumber(\"a\")\nnil\n\u003e\n```\n\n字符串长度\n\n```sh\n-\u003e /d/lua $ lua\nLua 5.2.0  Copyright (C) 1994-2011 Lua.org, PUC-Rio\n\u003e =#\"123456789\"\n9\n\u003e =#\"\\97bcd\"\n4\n\u003e\n```\n\n### 2.7 table\n\n```sh\n-\u003e /d/lua $ lua\nLua 5.2.0  Copyright (C) 1994-2011 Lua.org, PUC-Rio\n\u003e a = {}\n\u003e a[\"k\"] = \"kk\"\n\u003e =a\ntable: 003E8F50\n\u003e a[20] = 20\n\u003e =a[20]\n20\n\u003e =a[0]\nnil\n\u003e b= a\n\u003e =b[\"k\"]\nkk\n\u003e a = nil\n\u003e =b[\"k\"]\nkk\n\u003e b = nil -- 无引用table  垃圾回收\n\u003e a = {}\n\u003e a.k = 9\n\u003e =a.k\n9\n\u003e\n```\n\nmaxn\n\n```sh\n-\u003e /d/lua $ lua\nLua 5.2.0  Copyright (C) 1994-2011 Lua.org, PUC-Rio\n\u003e a = {}\n\u003e =table.maxn(a)\n0\n\u003e a.a = 9\n\u003e =table.maxn(a)\n0\n\u003e a[1] = 9\n\u003e =table.maxn(a)\n1\n\u003e a[-1] = 19\n\u003e =table.maxn(a)\n1\n\u003e a[1000] = 9\n\u003e =table.maxn(a)\n1000\n\u003e\n```\n\n### 2.8 function\n\nlua 函数是第一类值\n\n### 2.9 userdata\n\npass\n\n","Tags":["lua"],"CreateTime":1417620918,"EditTime":1417621050,"UpdateTime":1417620918,"IsComment":true,"IsLinked":false,"AuthorId":10,"Template":"blog.html","Type":"article","Status":"publish","Format":"markdown","Comments":[],"Hits":387}